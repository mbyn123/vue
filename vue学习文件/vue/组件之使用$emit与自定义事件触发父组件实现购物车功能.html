<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="vue.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css">
</head>
<body>
<!--父級-->
<div id="head"> 
 <!--将数据,参数上传到父级-->
<hd-news :lists="goods" @sum="total"></hd-news>
总计:{{totalPrice}}      <!--自定义事件触发父组件总价的计算方法-->
</div>    

<!--子級模版-->
<script type="text/x-template" id="hdNews">
<table  width="50%">
  <tr>
    <th>商品名称</th><th>商品价格</th><th>商品数量</th>
  </tr>
  <tr v-for="(v,k) in lists">
    <td>{{v.title}}</td><td>{{v.price}}</td>
    <td>
      <input type="text" v-model="v.num" @blur="sum">
    </td>                              <!--失去焦点的时候(鼠标离开)触发sum方法-->
  </tr>

</table>
</script>

</body>          
<script>

//子组件 
var hdNews={
  template:"#hdNews",
  //设置参数
  props:["lists"],
  methods:{
    sum(){
      this.$emit('sum')//使用$emit触发父组件的自定义事件@sum="total",表示数量该改变需要重新计算总价
    }
  },
};

//根组件
new Vue({ 
  el:'#head',
  components:{hdNews},
  mounted(){//使用mounted挂载点触发total总价计算方法
    this.total()
  },
   data:{//数据
   totalPrice:0,
   goods:[
     {title:"iphone8plus",price:6000,num:1},
     {title:"macbook pro",price:12000,num:1},
     {title:"iphone x max",price:10000,num:1},
   ],
  },
  methods:{
    total(){//設置总价的计算方法
      this.totalPrice=0;
      this.goods.forEach((v) => {//forEach() 方法用于调用数组的每个元素，并将元素传递给回调函数。
        this.totalPrice+=v.num*v.price
      })
    }
 
  }
})
  
</script>
</html>